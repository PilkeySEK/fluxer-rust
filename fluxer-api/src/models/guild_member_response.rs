/*
 * Fluxer API
 *
 * API for Fluxer, a free and open source instant messaging and VoIP platform built for friends, groups, and communities.
 *
 * The version of the OpenAPI document: 1.0.0
 * Contact: developers@fluxer.app
 * Generated by: https://openapi-generator.tech
 */

use crate::models;
use serde::{Deserialize, Serialize};

#[derive(Clone, Default, Debug, PartialEq, Serialize, Deserialize)]
pub struct GuildMemberResponse {
    #[serde(rename = "user")]
    pub user: Box<models::UserPartialResponse>,
    #[serde(
        rename = "nick",
        default,
        with = "::serde_with::rust::double_option",
        skip_serializing_if = "Option::is_none"
    )]
    pub nick: Option<Option<String>>,
    #[serde(
        rename = "avatar",
        default,
        with = "::serde_with::rust::double_option",
        skip_serializing_if = "Option::is_none"
    )]
    pub avatar: Option<Option<String>>,
    #[serde(
        rename = "banner",
        default,
        with = "::serde_with::rust::double_option",
        skip_serializing_if = "Option::is_none"
    )]
    pub banner: Option<Option<String>>,
    #[serde(
        rename = "accent_color",
        default,
        with = "::serde_with::rust::double_option",
        skip_serializing_if = "Option::is_none"
    )]
    pub accent_color: Option<Option<i32>>,
    /// Array of role IDs the member has
    #[serde(rename = "roles")]
    pub roles: Vec<String>,
    /// ISO8601 timestamp of when the user joined the guild
    #[serde(rename = "joined_at")]
    pub joined_at: String,
    /// Whether the member is muted in voice channels
    #[serde(rename = "mute")]
    pub mute: bool,
    /// Whether the member is deafened in voice channels
    #[serde(rename = "deaf")]
    pub deaf: bool,
    #[serde(
        rename = "communication_disabled_until",
        default,
        with = "::serde_with::rust::double_option",
        skip_serializing_if = "Option::is_none"
    )]
    pub communication_disabled_until: Option<Option<String>>,
    /// Member profile flags
    #[serde(
        rename = "profile_flags",
        default,
        with = "::serde_with::rust::double_option",
        skip_serializing_if = "Option::is_none"
    )]
    pub profile_flags: Option<Option<i32>>,
}

impl GuildMemberResponse {
    #[must_use] 
    pub fn new(
        user: models::UserPartialResponse,
        roles: Vec<String>,
        joined_at: String,
        mute: bool,
        deaf: bool,
    ) -> GuildMemberResponse {
        GuildMemberResponse {
            user: Box::new(user),
            nick: None,
            avatar: None,
            banner: None,
            accent_color: None,
            roles,
            joined_at,
            mute,
            deaf,
            communication_disabled_until: None,
            profile_flags: None,
        }
    }
}
